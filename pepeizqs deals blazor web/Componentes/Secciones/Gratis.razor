@page "/free/"

@using APIs.Steam
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Identity
@using Microsoft.VisualBasic
@using pepeizqs_deals_blazor_web.Componentes.Interfaz
@using pepeizqs_deals_web.Data

@inject IHttpContextAccessor Contexto

@if (cargadoGratis == true)
{
    string titulo = Herramientas.Idiomas.BuscarTexto(idioma, "Title", "Free");

    string keywords = "free";

    if (juegosActuales?.Count > 0)
    {
        int juegos = 0;
        int dlcs = 0;

        foreach (var juego in juegosActuales)
        {
            if (juego != null)
            {
                if (juego.Juego != null)
                {
                    if (juego.Juego.Tipo == Juegos.JuegoTipo.Game)
                    {
                        juegos += 1;
                    }
                    else if (juego.Juego.Tipo == Juegos.JuegoTipo.DLC)
                    {
                        dlcs += 1;
                    }
                }

                string[] keywordsEnBruto = Herramientas.Buscador.LimpiarNombre(juego.Nombre + " " + Gratis2.GratisCargar.DevolverGratis(juego.Tipo).Nombre, false).Split(' ');
                List<string> keywordsLista = new List<string>();
                keywordsLista.AddRange(keywordsEnBruto);

                foreach (var keyword in keywordsLista)
                {
                    if (keywords.Contains(keyword) == false && keyword.Length > 3)
                    {
                        keywords = keywords + ", " + keyword;
                    }
                }
            }
        }

        if (juegos == 0)
        {
            if (dlcs == 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String6", "Free"), dlcs.ToString()) + " " + Herramientas.Idiomas.BuscarTexto(idioma, "String8", "Free");
            }
            else if (dlcs > 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String7", "Free"), dlcs.ToString()) + " " + Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
        }
        else if (juegos > 0)
        {
            if (juegos == 1 && dlcs == 0)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String3", "Free"), juegos.ToString()) + " " + Herramientas.Idiomas.BuscarTexto(idioma, "String8", "Free");
            }
            else if (juegos > 1 && dlcs == 0)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String4", "Free"), juegos.ToString()) + " " + Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
            else if (juegos == 1 && dlcs == 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String3", "Free"), juegos.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String5", "Free") + " " +
                    string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String6", "Free"), dlcs.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
            else if (juegos > 1 && dlcs == 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String4", "Free"), juegos.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String5", "Free") + " " +
                    string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String6", "Free"), dlcs.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
            else if (juegos == 1 && dlcs > 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String3", "Free"), juegos.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String5", "Free") + " " +
                    string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String7", "Free"), dlcs.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
            else if (juegos > 1 && dlcs > 1)
            {
                titulo = string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String4", "Free"), juegos.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String5", "Free") + " " +
                    string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String7", "Free"), dlcs.ToString()) + " " +
                    Herramientas.Idiomas.BuscarTexto(idioma, "String9", "Free");
            }
        }

        if (string.IsNullOrEmpty(titulo) == true)
        {
            titulo = Herramientas.Idiomas.BuscarTexto(idioma, "String10", "Free");
        }
    }

    string contenidoJson = @"{
        ""@context"": ""https://schema.org"",
		""@type"": ""ItemList"",
		""name"": ""Free PC Games and DLCs to claim"",
		""numberOfItems"": ""@cantidad"",
        ""itemListOrder"": ""Descending"",
		""itemListElement"": [";

    contenidoJson = contenidoJson.Replace("@cantidad", juegosActuales?.Count.ToString());

    if (juegosActuales?.Count > 0)
    {
        int j = 0;
        while (j < juegosActuales.Count)
        {
            if (j != 0)
            {
                contenidoJson = contenidoJson + ",";
            }

            contenidoJson = contenidoJson + @"{
                ""@type"": ""ListItem"",
                ""position"": ""@posicion"",
                ""name"": ""@nombre"",
                ""url"": ""@enlace"",
                ""image"": ""@imagen""
            }";

            contenidoJson = contenidoJson.Replace("@posicion", (j + 1).ToString());
            contenidoJson = contenidoJson.Replace("@nombre", juegosActuales[j].Nombre);
            contenidoJson = contenidoJson.Replace("@enlace", "https://" + dominio + "/game/" + juegosActuales[j].JuegoId.ToString() + "/" + Herramientas.EnlaceAdaptador.Nombre(juegosActuales[j].Nombre) + "/");
            contenidoJson = contenidoJson.Replace("@imagen", juegosActuales[j].Imagen);

            j += 1;
        }
    }

    contenidoJson = contenidoJson + "] }";

    <Titulo tipo="@Titulo.Tipo.Gratis" idioma="@idioma" dominio="@dominio" keywords="@keywords" tituloGratis="@titulo" contenidoJsonGratis="@contenidoJson" />
}

<script>
    function moverScroll(id) {
        const yOffset = -90;
        const element = document.getElementById(id);
        const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;

        window.scrollTo({ top: y, behavior: 'smooth' });
    }
</script>

<style>
    :root {
        --glaseadoBorde: #FFFFFF1A;
        --glaseadoFondo: rgba(45, 47, 54, 0.70);
        --noResultados: rgba(132, 32, 41, 0.5);
        --botonSeleccionado: rgba(13, 22, 33, 0.75);
    }

    .caja-gratis {
        box-shadow: 0 22px 34px 0 rgba(0, 0, 0, 0.25);
        background-blend-mode: overlay;
        border-radius: 100px;
        border: 2px solid var(--glaseadoBorde);
        width: fit-content;
        background-color: var(--fondoSubcabecera);
        backdrop-filter: blur(25px);
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 5px;
    }

    .caja-gratis-animacion {
        opacity: 0;
        transition: all 0.5s ease, transform .2s ease;
        pointer-events: none;
        transform: scaleX(0);
        transform-origin: left;
        max-width: 0;
    }

        .caja-gratis-animacion.visible {
            opacity: 1;
            pointer-events: auto;
            transform: scaleX(1);
            max-width: fit-content;
        }

    .boton-gratis {
        backdrop-filter: brightness(100%);
        transition: backdrop-filter 0.2s ease;
    }

        .boton-gratis:hover {
            backdrop-filter: brightness(50%);
        }
</style>

<style>
    .caja-archivo-contenido {
        background-color: var(--fondoSubsubcabecera);
        box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);
        border: 1px solid var(--glaseadoBorde);
        border-radius: 20px;
    }

    .caja-archivo-titulo {
        background: color-mix(in srgb, var(--fondoSubcabecera) 45%, var(--fondoBotonPequeño));
        padding: 20px 30px;
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
    }
</style>

<div style="display: flex; align-items: center; justify-content: center; margin-top: 40px; transition: transform 0.3s ease, opacity 0.3s ease; flex-wrap: wrap;">
    <div class="caja-gratis">
        <button @onclick="@(e => CambiarTipo(e, Gratis2.GratisTipo.Desconocido, false))" class="boton-gratis" style="@CambiarEstilo(Gratis2.GratisTipo.Desconocido, false) border: 0px; height: 50px; padding: 15px 25px; display: inline-flex; align-items: center; color: var(--colorTexto); border-radius: inherit;">
            <div>
                <h1 style="font-size: 16px; margin: 0px;">
                    @Herramientas.Idiomas.BuscarTexto(idioma, "Title", "Free")
                </h1>
            </div>
        </button>

        @if (tiposActuales.Count > 0 && mostrarArchivo == false && Herramientas.Bots.UserAgentEsBot(userAgent) == false)
        {
            foreach (var tipo in tiposActuales)
            {
                if (tipo != Gratis2.GratisTipo.Desconocido)
                {
                    <button @onclick="@(e => CambiarTipo(e, tipo, false))" class="boton-gratis" style="@CambiarEstilo(tipo, false) border: 0px; height: 50px; padding: 15px 25px; display: inline-flex; align-items: center; color: var(--colorTexto); border-radius: inherit;">
                        <img src="@Gratis2.GratisCargar.DevolverGratis(tipo).ImagenIcono" style="width: 20px; height: 20px;" alt="@Gratis2.GratisCargar.DevolverGratis(tipo).Nombre" />
                    </button>
                }
            }
        }
    </div>

    <div class="tooltip-juego" onmousemove="enseñarTooltip(event, 'tooltip-free-archive')">
        <button @onclick="@(e => CambiarTipo(e, Gratis2.GratisTipo.Desconocido, true))" style="@CambiarEstilo(Gratis2.GratisTipo.Desconocido, true) border: 0px; margin-left: 30px; padding: 10px 15px; border-radius: 10px; display: flex; align-items: center; gap: 10px;">
            <div style="width: 24px; height: 24px;">
                <svg class="svg-boton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                    <path d="M64 128C64 110.3 78.3 96 96 96L544 96C561.7 96 576 110.3 576 128L576 160C576 177.7 561.7 192 544 192L96 192C78.3 192 64 177.7 64 160L64 128zM96 240L544 240L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 240zM248 304C234.7 304 224 314.7 224 328C224 341.3 234.7 352 248 352L392 352C405.3 352 416 341.3 416 328C416 314.7 405.3 304 392 304L248 304z" />
                </svg>
            </div>

            @if (mostrarArchivo == true)
            {
                <div style="color: var(--colorTexto);">
                    @Herramientas.Idiomas.BuscarTexto(idioma, "String2", "Free")
                </div>
            }
        </button>

        <div id="tooltip-free-archive" class="tooltip-relleno">
            <div style="margin: 8px; max-width: 300px; font-size: 14px;">
                @Herramientas.Idiomas.BuscarTexto(idioma, "String2", "Free")
            </div>
        </div>
    </div>
</div>

@if (mostrarArchivo == false)
{
    if (juegosActuales?.Count > 0)
    {
        <div class="caja-archivo-contenido cuerpo-ancho" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); justify-items: center; gap: 30px; padding: 30px; margin-top: 40px; margin-bottom: 40px;">
            @foreach (var juego in juegosActuales)
            {
                string enlaceGratis = juego.Enlace;

                if (Herramientas.Bots.UserAgentEsBot(userAgent) == false)
                {
                    enlaceGratis = Herramientas.EnlaceAcortador.Generar(juego.Enlace, juego.Tipo, usuarioPatreon, false);
                }

                <CajaJuego enlaceGratis="@enlaceGratis" drmGratis="@juego.DRM" tipoGratis="@juego.Tipo" idioma="@idioma" juego="@juego.Juego" juegosUsuario="@juegosUsuario" usuarioDeseadosSteam="@deseadosUsuario?.SteamWishlist" usuarioDeseadosWeb="@deseadosUsuario?.Wishlist" usuarioDeseadosGog="@deseadosUsuario?.GogWishlist" tipo="CajaJuego.Tipo.Gratis" userAgent="@userAgent" />
            }
        </div>
    }
    else
    {
        <div class="caja-gratis" style="background-color: var(--noResultados); display: flex; align-items: center; gap: 30px; justify-content: center; margin: 40px auto; padding: 20px; border-radius: 30px; max-width: 600px;">
            <div style="width: 30px; height: 30px; flex-shrink: 0;">
                <svg class="svg-boton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                    <path d="M528 320C528 205.1 434.9 112 320 112C205.1 112 112 205.1 112 320C112 434.9 205.1 528 320 528C434.9 528 528 434.9 528 320zM64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM320 240C302.3 240 288 254.3 288 272C288 285.3 277.3 296 264 296C250.7 296 240 285.3 240 272C240 227.8 275.8 192 320 192C364.2 192 400 227.8 400 272C400 319.2 364 339.2 344 346.5L344 350.3C344 363.6 333.3 374.3 320 374.3C306.7 374.3 296 363.6 296 350.3L296 342.2C296 321.7 310.8 307 326.1 302C332.5 299.9 339.3 296.5 344.3 291.7C348.6 287.5 352 281.7 352 272.1C352 254.4 337.7 240.1 320 240.1zM288 432C288 414.3 302.3 400 320 400C337.7 400 352 414.3 352 432C352 449.7 337.7 464 320 464C302.3 464 288 449.7 288 432z" />
                </svg>
            </div>

            <div>
                @Herramientas.Idiomas.BuscarTexto(idioma, "String12", "Free")
            </div>
        </div>
    }
}
else
{
    <div class="caja-archivo-contenido cuerpo-ancho" style="margin-top: 40px; margin-bottom: 40px; padding: 20px;">
        <div style="display: flex; align-items: start; gap: 15px; flex-wrap: wrap;">
            @foreach (var año in años)
            {
                <div>
                    <button @onclick="@(e => CambiarAño(e, año))" class="boton-pequeño" style="padding: 6px 10px; width: fit-content;">
                        @año
                    </button>

                    @if (añoSeleccionado == año)
                    {
                        <div style="background: var(--colorTexto); padding: 2px;" />
                    }
                </div>
            }
        </div>

        @if (string.IsNullOrEmpty(añoSeleccionado) == false)
        {
            <hr />

            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                <div style="padding: 6px 10px;">
                    @añoSeleccionado:
                </div>

                @foreach (var gratisPasado in gratisPasados)
                {
                    List<Juegos.JuegoGratis> gratisAño = new List<Juegos.JuegoGratis>();

                    foreach (var juego in gratisPasado.Juegos)
                    {
                        if (juego.FechaEmpieza.Year.ToString() == añoSeleccionado)
                        {
                            gratisAño.Add(juego);
                        }
                    }

                    if (gratisAño.Count > 0)
                    {
                        <div>
                            <a onclick="moverScroll('pasado-@gratisPasado.Tipo.Nombre')" class="boton-pequeño" style="color: var(--colorTexto); text-decoration: none; cursor: pointer; padding: 6px 10px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <img src="@gratisPasado.Tipo.ImagenIcono" style="width: 22px; height: 22px;" alt="@gratisPasado.Tipo.Nombre" />

                                    <div style="font-size: 14px;">
                                        @gratisAño.Count.ToString()
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                }
            </div>
        }
    </div>

    @if (string.IsNullOrEmpty(añoSeleccionado) == false)
    {
        <div class="cuerpo-ancho" style="display: flex; flex-direction: column; gap: 40px; margin-top: 40px; margin-bottom: 40px;">
            @foreach (var gratisPasado in gratisPasados)
            {
                List<Juegos.JuegoGratis> gratisAño = new List<Juegos.JuegoGratis>();

                foreach (var juego in gratisPasado.Juegos)
                {
                    if (juego.FechaEmpieza.Year.ToString() == añoSeleccionado)
                    {
                        gratisAño.Add(juego);
                    }
                }

                if (gratisAño.Count > 0)
                {
                    <div class="caja-archivo-contenido">
                        <div id="pasado-@gratisPasado.Tipo.Nombre" class="caja-archivo-titulo">
                            <img src="@gratisPasado.Tipo.ImagenLogo" alt="@gratisPasado.Tipo.Nombre" style="max-width: 150px; max-height: 70px; object-fit: contain;" />
                        </div>

                        <div style="padding: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; justify-content: flex-start;">
                            @{
                                int i = 1;
                                while (i < 13)
                                {
                                    List<Juegos.JuegoGratis> gratisMensual = new List<Juegos.JuegoGratis>();

                                    foreach (var juego in gratisAño)
                                    {
                                        if (juego.FechaEmpieza.Month == i)
                                        {
                                            gratisMensual.Add(juego);
                                        }
                                    }

                                    if (gratisMensual.Count > 0)
                                    {
                                        gratisMensual = gratisMensual.OrderBy(g => g.Nombre).ToList();

                                        <div>
                                            <label>@Herramientas.Idiomas.BuscarTexto(idioma, "Month." + i.ToString(), "Months") (@gratisMensual.Count.ToString())</label>

                                            <ul>
                                                @foreach (var juegoMensual in gratisMensual)
                                                {
                                                    <li style="margin-bottom: 5px;">
                                                        <a href="/game/@juegoMensual.JuegoId/@Herramientas.EnlaceAdaptador.Nombre(juegoMensual.Nombre)/">
                                                            <label style="cursor: pointer;">@juegoMensual.Nombre</label>

                                                            @if (gratisPasado.Tipo.DRMEnseñar == true)
                                                            {
                                                                <label style="cursor: pointer; margin-left: 5px;">(@Juegos.JuegoDRM2.DevolverDRM(juegoMensual.DRM))</label>
                                                            }
                                                        </a>
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    }

                                    i += 1;
                                }
                            }
                        </div>
                    </div>
                }
            }
        </div>
    }
}

@code {

    #nullable disable

    private string idioma = "en";
    private string usuarioId = null;
    private string userAgent = null;
    private string dominio = null;

    [PersistentState] public Herramientas.UsuarioListadosJuegos juegosUsuario { get; set; }
    [PersistentState] public Usuario deseadosUsuario { get; set; }
    private bool usuarioPatreon = false;

    [PersistentState] public List<Juegos.JuegoGratis> juegosActuales { get; set; }
    private List<Gratis2.GratisComponente> gratisPasados = new List<Gratis2.GratisComponente>();

    private List<string> años = new List<string>();
    private string añoSeleccionado = string.Empty;

    private bool cargadoGratis = false;

    protected override async Task OnInitializedAsync()
    {
        Herramientas.ContextoUsuarioDatos datos = Herramientas.ContextoUsuario.Leer(Contexto);
        idioma = datos.Idioma;
        usuarioId = datos.UsuarioId;
        userAgent = datos.UserAgent;
        dominio = datos.Dominio;

        if (string.IsNullOrEmpty(usuarioId) == false)
        {
            idioma = await BaseDatos.Usuarios.Buscar.IdiomaSobreescribir(usuarioId);
            juegosUsuario ??= await Herramientas.UsuarioJuegos.Cargar(usuarioId);
            deseadosUsuario ??= await BaseDatos.Usuarios.Buscar.DeseadosTiene(usuarioId);
            usuarioPatreon = Herramientas.Patreon.VerificarActivo(await BaseDatos.Usuarios.Buscar.FechaPatreon(usuarioId));
        }

        //--------------------------------------------------------------------

        DateTime arranque = new DateTime(2011, 1, 1);

        int i = 0;
        while (i < 100)
        {
            if (arranque.Year != DateTime.Now.Year)
            {
                años.Add(arranque.Year.ToString());
                arranque = arranque.AddYears(1);
            }
            i += 1;
        }

        años.Add(DateTime.Now.Year.ToString());
        años.Reverse();

        //--------------------------------------------------------------------

        juegosActuales ??= await BaseDatos.Gratis.Buscar.Actuales();
        cargadoGratis = true;

        if (juegosActuales?.Count > 0)
        {
            foreach (var juegoActual in juegosActuales)
            {
                Juegos.Juego juego2 = await BaseDatos.Juegos.Buscar.UnJuegoReducido(juegoActual.JuegoId);
                juegoActual.Imagen = juego2.Imagenes.Header_460x215;
                juegoActual.Juego = juego2;

                bool añadirTipo = true;

                if (tiposActuales.Count > 0)
                {
                    foreach (var tipoActual in tiposActuales)
                    {
                        if (tipoActual == juegoActual.Tipo)
                        {
                            añadirTipo = false;
                        }
                    }
                }

                if (añadirTipo == true)
                {
                    tiposActuales.Add(juegoActual.Tipo);
                }
            }
        }

        if (tiposActuales.Count > 0)
        {
            tiposActuales = tiposActuales.OrderBy(x => (int)x).ToList();
        }
    }

    private Gratis2.GratisTipo tipoSeleccionado = Gratis2.GratisTipo.Desconocido;
    private List<Gratis2.GratisTipo> tiposActuales = new List<Gratis2.GratisTipo>();
    private bool mostrarArchivo = false;

    private async Task CambiarTipo(MouseEventArgs e, Gratis2.GratisTipo nuevoTipo, bool esArchivo)
    {
        mostrarArchivo = esArchivo;

        if (esArchivo == false)
        {
            tipoSeleccionado = nuevoTipo;
            juegosActuales = await BaseDatos.Gratis.Buscar.Actuales(nuevoTipo);

            if (juegosActuales.Count > 0)
            {
                foreach (var juegoActual in juegosActuales)
                {
                    Juegos.Juego juego2 = await BaseDatos.Juegos.Buscar.UnJuegoReducido(juegoActual.JuegoId);
                    juegoActual.Imagen = juego2.Imagenes.Header_460x215;
                    juegoActual.Juego = juego2;
                }
            }
        }
        else
        {
            añoSeleccionado = DateTime.Now.Year.ToString();
            await GenerarArchivo();
        }
    }

    private string CambiarEstilo(Gratis2.GratisTipo nuevoTipo, bool esArchivo)
    {
        if (mostrarArchivo == true && esArchivo == true)
        {
            if (nuevoTipo != Gratis2.GratisTipo.Desconocido)
            {
                return "background-color: transparent;";
            }
            else
            {
                return "background: var(--botonSeleccionado);";
            }
        }
        else
        {
            if (tipoSeleccionado == nuevoTipo && mostrarArchivo == false && esArchivo == false)
            {
                return "background: var(--botonSeleccionado);";
            }
            else
            {
                return "background-color: transparent;";
            }
        }
    }

    #region Archivo

    private async Task CambiarAño(MouseEventArgs e, string nuevoAño)
    {
        añoSeleccionado = nuevoAño;
        await GenerarArchivo();
    }

    private async Task GenerarArchivo()
    {
        List<Juegos.JuegoGratis> juegosPasados = await BaseDatos.Gratis.Buscar.Año(añoSeleccionado);

        if (juegosPasados.Count > 0)
        {
            gratisPasados.Clear();

            foreach (var gratis in Gratis2.GratisCargar.GenerarListado())
            {
                List<Juegos.JuegoGratis> juegos2 = new List<Juegos.JuegoGratis>();

                foreach (var juego in juegosPasados)
                {
                    if (juego.Tipo == gratis.Tipo)
                    {
                        juegos2.Add(juego);
                    }
                }

                if (juegos2.Count > 0)
                {
                    Gratis2.GratisComponente componente = new Gratis2.GratisComponente();
                    componente.Juegos = juegos2;
                    componente.Tipo = gratis;

                    gratisPasados.Add(componente);
                }
            }
        }
    }

    #endregion
}
